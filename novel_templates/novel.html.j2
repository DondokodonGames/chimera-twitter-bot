<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>{{ story_title }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="/assets/css/novel.css" />
</head>
<body class="novel-body {{ initial_font_class }}">
  <header class="header">
    <div class="title-area">
      {% if logo_image %}
        <img src="{{ logo_image }}" alt="ロゴ" class="logo pixelart" />
      {% else %}
        <h1 class="pixel-font">{{ story_title }}</h1>
      {% endif %}
    </div>
    <div class="bgm-controls">
      <button id="bgm-toggle" class="pixel-button">
        {{ "BGM ON" if initial_bgm_state else "BGM OFF" }}
      </button>
    </div>
  </header>

  <main class="main-content">
    <script id="story-data" type="application/json">
      {{ chapters | tojson }}
    </script>
    <div id="chapter-container"></div>
  </main>

  <footer class="footer-nav">
    <button id="prev-button" class="nav-button pixel-button" disabled>前へ</button>
    <div id="choices-container" class="choices"></div>
    <button id="next-button" class="nav-button pixel-button" disabled>次へ</button>
  </footer>

  <!-- フォント選択モーダル -->
  <div id="font-selector" class="modal hidden">
    <h2 class="pixel-font">フォント選択</h2>
    <ul>
      {% for font_option in font_options %}
      <li>
        <button class="font-btn pixel-button" data-font="{{ font_option.class }}">
          {{ font_option.label }}
        </button>
      </li>
      {% endfor %}
    </ul>
    <button id="font-close" class="pixel-button">閉じる</button>
  </div>

  <script src="/assets/js/novel.js"></script>
</body>
</html>
